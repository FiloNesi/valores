<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Convivencia, política y justicia — Web interactiva</title>
    
    <!-- 1. Cargar Tailwind CSS para los estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Cargar las librerías de React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- 3. Cargar Babel para traducir JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Estilos adicionales para una mejor apariencia */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos básicos para la clase 'prose' de Tailwind */
        .prose p { margin-bottom: 1rem; }
        .prose strong { font-weight: 600; }
        .prose .italic { font-style: italic; }
        .prose blockquote {
            margin: 1rem 0;
            padding-left: 1rem;
            border-left: 4px solid #e2e8f0; /* slate-200 */
            color: #475569; /* slate-600 */
            font-style: italic;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- El div donde se "montará" nuestra aplicación de React -->
    <div id="root"></div>

    <!-- IMPORTANTE: El script debe ser de tipo "text/babel" para que Babel lo procese -->
    <script type="text/babel">
        // ============================================================
        // Web interactiva SdA (2º ESO Valores):
        //  - Pestaña 1: Aventura "Un día en una ciudad vacía" (3 decisiones)
        //  - Pestaña 2: Lecturas interactivas con preguntas (materiales proporcionados)
        //  - Pestaña 3: Constructor de argumentos (Toulmin simplificado)
        // ============================================================
        const { useState, useMemo } = React;

        function App() { // Renombrado a App para mantener la convención
          const [tab, setTab] = useState("aventura");

          return (
            <div className="min-h-screen w-full bg-slate-50 flex items-center justify-center p-4">
              <div className="w-full max-w-5xl bg-white rounded-2xl shadow-xl p-6 md:p-8">
                <header className="flex items-start justify-between gap-4">
                  <div>
                    <h1 className="text-2xl md:text-3xl font-bold text-slate-800">Convivencia, política y justicia — Web interactiva</h1>
                    <p className="text-slate-500">2º ESO · Valores Cívicos y Éticos</p>
                  </div>
                </header>

                {/* Tabs */}
                <nav className="mt-5 flex flex-wrap gap-2 border-b border-slate-200 pb-3">
                  <TabButton active={tab === "aventura"} onClick={() => setTab("aventura")}>Aventura: ciudad vacía</TabButton>
                  <TabButton active={tab === "lecturas"} onClick={() => setTab("lecturas")}>Lecturas interactivas</TabButton>
                  <TabButton active={tab === "toulmin"} onClick={() => setTab("toulmin")}>Constructor Toulmin</TabButton>
                </nav>

                <main className="mt-6">
                  {tab === "aventura" && <AventuraCiudadVacia />}
                  {tab === "lecturas" && <LecturasInteractivas />}
                  {tab === "toulmin" && <ToulminBuilder />}
                </main>

                <footer className="mt-8 text-xs text-slate-400">
                  <p>
                    Conexiones curriculares: naturaleza social del ser humano · virtudes del diálogo · resolución pacífica de conflictos · ley, poder y justicia (Constitución de 1978).
                  </p>
                </footer>
              </div>
            </div>
          );
        }

        function TabButton({ active, onClick, children }) {
          return (
            <button
              onClick={onClick}
              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                active ? "bg-slate-800 text-white" : "bg-white text-slate-600 hover:bg-slate-100"
              }`}
            >
              {children}
            </button>
          );
        }

        // ============================
        // Pestaña 1 — AVENTURA (3 decisiones)
        // ============================
        function AventuraCiudadVacia() {
          const [started, setStarted] = useState(false);
          const [path, setPath] = useState([]);
          const [choices, setChoices] = useState([]);

          function endNode(title, prompts) {
            return {
              title,
              text: (
                <>
                  {prompts.map((p, i) => (<p key={i} className="mb-2">{p}</p>))}
                  <p className="mt-3 text-sm italic">Has completado las 3 decisiones. Pasa a la reflexión final.</p>
                </>
              ),
              options: [],
              end: true,
            };
          }

          const nodes = useMemo(() => ({
            intro: {
              title: "Un día en una ciudad vacía",
              text: (
                <>
                  <p className="mb-3">Imagina que hoy te despiertas y descubres que eres la única persona en tu ciudad. No hay tiendas abiertas, ni internet estable, ni policía, ni médicos. Al principio sientes libertad, pero pronto aparecen dudas: ¿cómo conseguirás comida, seguridad y compañía?</p>
                  <p className="mb-2">Vas a tomar <strong>tres decisiones</strong>. Cada una te llevará a nuevas situaciones y problemas. ¡Piensa y elige!</p>
                </>
              ),
              options: [
                { id: "L1_comida", label: "Buscar comida y agua (supervivencia)" },
                { id: "L1_comunicacion", label: "Buscar ayuda/comunicación (hablar con alguien)" },
                { id: "L1_explorar", label: "Explorar la ciudad (organizarse y planificar)" },
              ],
            },
            L1_comida: {
              title: "Objetivo: supervivencia inmediata",
              text: (<><p className="mb-2">Llegas a un supermercado. Las estanterías aún tienen productos, pero la luz parpadea y los frigoríficos dejan de funcionar.</p><p className="mb-2">Piensas en cuánto durará la comida y en la posibilidad de racionarla.</p></>),
              options: [{ id: "L2_racionar", label: "Racionar víveres y organizar una despensa básica" },{ id: "L2_buscaragua", label: "Buscar fuentes de agua seguras en la ciudad" },{ id: "L2_energia", label: "Intentar restablecer energía básica (generador)" },],
            },
            L1_comunicacion: {
              title: "Objetivo: comunicarte con alguien",
              text: (<><p className="mb-2">Encuentras una comisaría con radios y un centro cívico con un panel informativo antiguo.</p><p className="mb-2">La señal es inestable y no sabes si alguien puede oírte.</p></>),
              options: [{ id: "L2_radio", label: "Probar emisora de radio y dejar mensajes periódicos" },{ id: "L2_mensajes", label: "Escribir señales visibles por la ciudad (plaza, azoteas)" },{ id: "L2_refugio", label: "Montar un punto de encuentro/refugio con normas básicas" },],
            },
            L1_explorar: {
              title: "Objetivo: explorar y planificar",
              text: (<><p className="mb-2">Subes a un edificio alto para observar la ciudad. Ves hospitales, estación de tren y depósitos municipales.</p><p className="mb-2">Trazas un mapa con posibles recursos… y riesgos.</p></>),
              options: [{ id: "L2_hospital", label: "Ir al hospital a por botiquín y aprender primeros auxilios" },{ id: "L2_estacion", label: "Revisar estación/depósito para transporte y logística" },{ id: "L2_normas", label: "Escribir un borrador de normas para una convivencia futura" },],
            },
            L2_racionar: {
              title: "Racionar y calcular",
              text: (<><p className="mb-2">Organizas comida para una semana, pero te preocupa la nutrición y el desperdicio.</p><p className="mb-2">Sin cooperación, cada error pesa más. ¿Cómo minimizar riesgos?</p></>),
              options: [{ id: "L3_huerto", label: "Iniciar un huerto urbano básico (progreso sostenible)" },{ id: "L3_intercambio", label: "Diseñar reglas para un futuro intercambio justo" },{ id: "L3_proteccion", label: "Asegurar el almacén: inventario y protocolo de acceso" },],
            },
            L2_buscaragua: {
              title: "Agua segura",
              text: (<p className="mb-2">Localizas una fuente y depósitos. Necesitas potabilizar el agua para evitar enfermedades.</p>),
              options: [{ id: "L3_hervir", label: "Hervir y filtrar con métodos caseros" },{ id: "L3_quimico", label: "Buscar pastillas potabilizadoras en farmacias" },{ id: "L3_cooperar", label: "Dejar instrucciones visibles para otras posibles personas" },],
            },
            L2_energia: {
              title: "Energía básica",
              text: (<><p className="mb-2">Encuentras un generador, pero requiere combustible y mantenimiento.</p><p className="mb-2">¿Qué priorizarás si la energía es limitada?</p></>),
              options: [{ id: "L3_comunicacionEnergia", label: "Priorizar comunicaciones y radio de emergencia" },{ id: "L3_refrigeracion", label: "Refrigerar comida crítica para evitar pérdidas" },{ id: "L3_luzSeguridad", label: "Iluminación y seguridad perimetral por la noche" },],
            },
            L2_radio: {
              title: "Señales al aire",
              text: (<p className="mb-2">Emites a horas fijas. El silencio genera incertidumbre, pero establecer rutinas ayuda.</p>),
              options: [{ id: "L3_protocolo", label: "Crear un protocolo de comunicación claro y repetible" },{ id: "L3_baliza", label: "Instalar una baliza visual (señales en azoteas)" },{ id: "L3_registro", label: "Llevar un registro de intentos y resultados (evidencias)" },],
            },
            L2_mensajes: {
              title: "Deja huellas útiles",
              text: (<p className="mb-2">Colocas mensajes en puntos clave. Eliges un lenguaje claro y símbolos entendibles.</p>),
              options: [{ id: "L3_mapa", label: "Dibujar un mapa simple de recursos y riesgos" },{ id: "L3_idiomas", label: "Usar varios idiomas e iconos para inclusión" },{ id: "L3_punto", label: "Definir un punto de encuentro con horarios" },],
            },
            L2_refugio: {
              title: "Refugio con normas",
              text: (<p className="mb-2">Preparas un espacio acogedor. Surgen preguntas: ¿quién decide? ¿cómo se reparte lo escaso?</p>),
              options: [{ id: "L3_normasJustas", label: "Escribir normas claras (turnos, limpieza, seguridad)" },{ id: "L3_mediacion", label: "Diseñar un sistema de mediación para conflictos" },{ id: "L3_transparencia", label: "Publicar inventarios y decisiones (transparencia)" },],
            },
            L2_hospital: {
              title: "Salud y cuidado",
              text: (<p className="mb-2">Consigues un botiquín y una guía de primeros auxilios. Aprender salva vidas.</p>),
              options: [{ id: "L3_formacion", label: "Hacer un plan de formación básica en salud" },{ id: "L3_prevencion", label: "Prevenir riesgos (limpieza, agua, residuos)" },{ id: "L3_derivar", label: "Dejar señales de dónde encontrar material médico" },],
            },
            L2_estacion: {
              title: "Logística y movilidad",
              text: (<p className="mb-2">Revisas rutas, combustibles y transporte. La logística coordina la ciudad.</p>),
              options: [{ id: "L3_rutas", label: "Trazar rutas seguras y eficientes" },{ id: "L3_almacen", label: "Centralizar almacenes y repartir con equidad" },{ id: "L3_emergencias", label: "Definir prioridades ante emergencias" },],
            },
            L2_normas: {
              title: "Esbozo de normas",
              text: (<p className="mb-2">Piensas en la convivencia futura. ¿Cómo garantizar justicia y participación?</p>),
              options: [{ id: "L3_constituyentes", label: "Redactar principios básicos (dignidad, igualdad, cooperación)" },{ id: "L3_tomasdecisiones", label: "Elegir un sistema de toma de decisiones (votos/consenso)" },{ id: "L3_derechos", label: "Definir derechos y deberes mínimos" },],
            },
            L3_huerto: endNode("Progreso sostenible", ["Has asegurado calorías a medio plazo. ¿Qué conocimientos necesitas compartir para mejorar la cosecha?"]),
            L3_intercambio: endNode("Reglas para el intercambio", ["Piensas en precios justos y en evitar abusos. ¿Cómo garantizarías transparencia y acceso equitativo?"]),
            L3_proteccion: endNode("Seguridad alimentaria", ["Inventario claro y accesos definidos reducen conflictos. ¿Cómo comunicarías estas reglas?"]),
            L3_hervir: endNode("Potabilización básica", ["Reducir riesgos requiere disciplina. ¿Cómo mantendrías el protocolo cuando lleguen más personas?"]),
            L3_quimico: endNode("Recursos sanitarios", ["Las farmacias son finitas. ¿Cómo planificar el relevo cuando se agoten los suministros?"]),
            L3_cooperar: endNode("Cooperación abierta", ["Dejar instrucciones ayuda a otros. ¿Qué virtudes del diálogo practicarás si aparece más gente?"]),
            L3_comunicacionEnergia: endNode("Energía para comunicar", ["Priorizar comunicación puede traer ayuda. ¿Qué normas de uso establecerías para el equipo?"]),
            L3_refrigeracion: endNode("Guardar lo esencial", ["Evitas pérdidas, pero consumes energía. ¿Cómo decidirías qué se refrigera primero?"]),
            L3_luzSeguridad: endNode("Iluminar y cuidar", ["La seguridad aumenta el descanso. ¿Cómo equilibrar seguridad con ahorro energético?"]),
            L3_protocolo: endNode("Lenguaje claro", ["Un protocolo reduce malentendidos. ¿Qué indicadores usarás para evaluar si funciona?"]),
            L3_baliza: endNode("Señales visibles", ["Las balizas orientan a cualquiera. ¿Cómo evitarías que la información se manipule?"]),
            L3_registro: endNode("Evidencias y mejora", ["Registrar ayuda a aprender. ¿Qué patrones buscarías en los datos?"]),
            L3_mapa: endNode("Mapa inclusivo", ["Un mapa guía a recién llegados. ¿Cómo lo mantendrás actualizado?"]),
            L3_idiomas: endNode("Comunicación inclusiva", ["Múltiples idiomas e iconos reducen barreras. ¿Qué otras barreras debes prever?"]),
            L3_punto: endNode("Encuentro seguro", ["Un punto y horarios evitan pérdidas de tiempo. ¿Qué harás ante desacuerdos?"]),
            L3_normasJustas: endNode("Normas claras", ["Las reglas dan estabilidad. ¿Cómo asegurarías que todos participen en su revisión?"]),
            L3_mediacion: endNode("Mediación y paz", ["Diseñas un sistema para resolver conflictos. ¿Qué virtudes del diálogo son clave?"]),
            L3_transparencia: endNode("Transparencia", ["Publicar decisiones reduce sospechas. ¿Qué información debe ser pública y cuál privada?"]),
            L3_formacion: endNode("Cuidar la vida", ["Formarse salva vidas. ¿Cómo organizarías turnos y tutorías para aprender?"]),
            L3_prevencion: endNode("Prevención primero", ["La salud depende de hábitos. ¿Qué normas higiénicas consensuarías?"]),
            L3_derivar: endNode("Red de salud", ["Señalizar recursos mejora el acceso. ¿Cómo priorizarías casos urgentes?"]),
            L3_rutas: endNode("Rutas seguras", ["Definir rutas ahorra tiempo y riesgos. ¿Cómo evaluarías su eficacia?"]),
            L3_almacen: endNode("Reparto equitativo", ["Centralizar ayuda a la justicia distributiva. ¿Qué criterio usarías para repartir?"]),
            L3_emergencias: endNode("Prioridades claras", ["Un plan salva vidas en crisis. ¿Quién decide y con qué legitimidad?"]),
            L3_constituyentes: endNode("Principios básicos", ["Dignidad, igualdad y cooperación como base. ¿Cómo relacionas esto con el art. 1 y 10 de la Constitución de 1978?"]),
            L3_tomasdecisiones: endNode("Decidir juntos", ["Voto o consenso: opciones distintas. ¿Cuándo preferirías cada una?"]),
            L3_derechos: endNode("Derechos y deberes", ["Equilibrar libertades y responsabilidades evita abusos. ¿Qué derechos mínimos garantizarías?"]),
          }), []);

          const currentNodeId = useMemo(() => {
            if (!started) return "intro";
            return path.length === 0 ? "intro" : path[path.length - 1];
          }, [started, path]);

          const currentNode = nodes[currentNodeId] ?? nodes["intro"];

          const onChoose = (option) => {
            if (currentNode.end) return;
            const nextId = option.id;
            setPath((p) => (p.length === 0 ? [nextId] : [...p, nextId]));
            setChoices((c) => [...c, { nodeId: currentNodeId, optionLabel: option.label }]);
          };

          const canChoose = currentNode.options?.length > 0 && path.length < 3;

          const restart = () => {
            setStarted(false);
            setPath([]);
            setChoices([]);
          };

          const copySummary = () => {
            const ruta = path.join(" → ");
            const resumen = `Ruta elegida: ${ruta}\n\nOpciones:\n${choices.map((c, i) => `${i + 1}. [${c.nodeId}] ${c.optionLabel}`).join("\n")}\n`;
            const textArea = document.createElement("textarea");
            textArea.value = resumen;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert("Resumen copiado al portapapeles");
            } catch (err) {
                alert("No se pudo copiar.");
            }
            document.body.removeChild(textArea);
          };

          const progress = Math.min(path.length / 3, 1);

          return (
            <section className="grid gap-4">
              <header className="flex items-start justify-between gap-4">
                <div>
                  <h2 className="text-xl md:text-2xl font-bold text-slate-800">Aventura: Un día en una ciudad vacía</h2>
                  <p className="text-slate-500">Aventura de 3 decisiones · supervivencia · comunicación · progreso</p>
                </div>
                <div className="text-right">
                  <button onClick={restart} className="px-3 py-2 rounded-lg bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-medium">Reiniciar</button>
                </div>
              </header>

              <div className="h-2 w-full bg-slate-200 rounded-full overflow-hidden" aria-label="Progreso">
                <div className="h-full bg-slate-700 transition-all duration-500" style={{ width: `${progress * 100}%` }} />
              </div>
              <p className="-mt-1 text-xs text-slate-400">Decisiones: {path.length} / 3</p>

              {!started ? (
                <IntroCard onStart={() => setStarted(true)} node={nodes.intro} />
              ) : (
                <NodeCard node={currentNode} canChoose={canChoose} onChoose={onChoose} finished={path.length >= 3 || currentNode.end} copySummary={copySummary} pathIds={path} nodes={nodes} />
              )}
            </section>
          );
        }

        function IntroCard({ onStart, node }) {
          return (
            <div className="grid gap-4">
              <article className="bg-slate-100 rounded-2xl p-4 md:p-6">
                <h3 className="text-lg font-semibold mb-2 text-slate-700">{node.title}</h3>
                <div className="prose prose-slate max-w-none">{node.text}</div>
              </article>
              <div className="flex flex-wrap gap-3">
                <button onClick={onStart} className="px-4 py-2 rounded-xl bg-slate-800 text-white hover:bg-slate-900 font-medium transition-colors">Comenzar</button>
              </div>
              <Tips />
            </div>
          );
        }

        function NodeCard({ node, canChoose, onChoose, finished, copySummary, pathIds, nodes }) {
          return (
            <div className="grid gap-4">
              <article className="bg-slate-100 rounded-2xl p-4 md:p-6">
                <h3 className="text-lg font-semibold mb-2 text-slate-700">{node.title}</h3>
                <div className="prose prose-slate max-w-none">{node.text}</div>
              </article>
              {canChoose ? (
                <div className="grid md:grid-cols-3 gap-3">
                  {node.options.map((opt) => (
                    <button key={opt.id} onClick={() => onChoose(opt)} className="w-full text-left bg-white border border-slate-200 hover:border-slate-400 rounded-xl p-4 shadow-sm hover:shadow-md transition-all">
                      <div className="font-medium text-slate-700">{opt.label}</div>
                      <div className="text-xs text-slate-500 mt-1">Elige para continuar…</div>
                    </button>
                  ))}
                </div>
              ) : (
                <div className="bg-white rounded-xl border border-slate-200 p-4">
                  {finished ? <Reflection copySummary={copySummary} pathIds={pathIds} nodes={nodes} /> : <p className="text-slate-500">No hay más opciones en este punto.</p>}
                </div>
              )}
            </div>
          );
        }

        function Reflection({ copySummary, pathIds, nodes }) {
          return (
            <div className="grid gap-3">
              <h4 className="text-base md:text-lg font-semibold text-slate-800">Reflexión final</h4>
              <ul className="list-disc pl-5 text-slate-700 space-y-2">
                <li>Relaciona tus decisiones con los <strong>tres motivos</strong> para vivir en sociedad: <em>sobrevivir, comunicarse, progresar</em>.</li>
                <li>¿Qué <strong>normas</strong> serían necesarias si mañana llegan más personas? Propón 3.</li>
                <li>Vincula una de tus normas con la <strong>justicia</strong>. ¿A quién protege? ¿Por qué es legítima?</li>
                <li>Conecta con la Constitución de 1978: menciona un artículo (p. ej., art. 1 o 10) que apoye tu propuesta.</li>
              </ul>
              <div className="flex flex-wrap gap-3 mt-2">
                <button onClick={copySummary} className="px-4 py-2 rounded-xl bg-slate-800 text-white hover:bg-slate-900 font-medium">Copiar mi recorrido</button>
                <details className="px-4 py-2 rounded-xl bg-slate-50 border border-slate-200">
                  <summary className="cursor-pointer font-medium text-slate-700">Ver ruta elegida</summary>
                  <ol className="list-decimal pl-5 mt-2 text-slate-600 text-sm">
                    {pathIds.map((id, i) => (<li key={i} className="mt-1"><span className="font-mono text-xs bg-slate-200 px-2 py-0.5 rounded">{id}</span> — <em>{nodes[id]?.title || ""}</em></li>))}
                  </ol>
                </details>
              </div>
              <Tips />
            </div>
          );
        }

        function Tips() {
          return (
            <aside className="grid gap-2 bg-slate-50 border border-slate-200 rounded-xl p-4 mt-2">
              <h4 className="font-semibold text-slate-700">Pistas didácticas</h4>
              <ul className="list-disc pl-5 text-slate-600 text-sm space-y-1">
                <li><strong>Objetivo:</strong> comprender la necesidad de la sociedad y la política; practicar toma de decisiones y reflexión ética.</li>
                <li><strong>Conexiones:</strong> virtudes del diálogo, resolución pacífica de conflictos, justicia y Constitución de 1978.</li>
                <li><strong>DUA:</strong> decisiones breves, lenguaje claro, apoyo visual y posibilidad de copiar el recorrido.</li>
              </ul>
            </aside>
          );
        }

        // ============================
        // Pestaña 2 — LECTURAS INTERACTIVAS
        // ============================
        function LecturasInteractivas() {
          return (
            <section className="grid gap-6">
              <article className="bg-slate-100 rounded-2xl p-4 md:p-6">
                <h2 className="text-xl font-semibold mb-2 text-slate-800">¿Qué nos define como seres sociales?</h2>
                <div className="prose prose-slate max-w-none space-y-3">
                  <p>Los seres humanos somos seres sociales: necesitamos relacionarnos, cuidarnos y comunicarnos. Aristóteles afirmó que el ser humano es un animal social por naturaleza desde el origen de la especie.</p>
                  <p>¿Por qué sentimos esta necesidad? En gran parte por tres motivos: <strong>sobrevivir</strong>, <strong>comunicarse</strong> y <strong>progresar</strong>.</p>
                </div>
              </article>
              <Quiz title="Comprueba tu comprensión (Lectura 1)" items={[{type: "multi", q: "Selecciona los tres motivos que justifican la vida en sociedad según el texto:", options: ["Sobrevivir", "Acumular riquezas", "Comunicarse", "Progresar", "Competir siempre"], correct: [0, 2, 3], feedback: "Los motivos mencionados son sobrevivir, comunicarse y progresar."},{type: "single", q: "Cuando compartimos nuestros sentimientos para acercarnos a los demás, estamos poniendo en práctica sobre todo…", options: ["la supervivencia", "la comunicación", "el progreso"], correct: [1], feedback: "La idea central es la <comunicación> como rasgo social distintivo."}]}/>
              <article className="bg-slate-100 rounded-2xl p-4 md:p-6">
                <h2 className="text-xl font-semibold mb-2 text-slate-800">¿Es necesaria la política para vivir en sociedad?</h2>
                <div className="prose prose-slate max-w-none space-y-3">
                  <p>Vivimos gracias a una red de colaboraciones. La convivencia puede generar problemas que es preciso resolver. <strong>La política</strong> organiza la convivencia buscando el bien común mediante leyes, normas e instituciones.</p>
                  <p>Para Aristóteles, la política debería orientarse a la <strong>felicidad de la polis</strong>, una <em>felicidad compartida</em> que se sostiene con justicia. Esa felicidad social la llamamos <strong>justicia</strong>.</p>
                  <blockquote>«El Estado más perfecto es aquel en que cada ciudadano puede, merced a las leyes, practicar lo mejor posible la virtud y asegurar mejor su felicidad.» (Aristóteles, <em>Política</em>)</blockquote>
                </div>
              </article>
              <Quiz title="Comprueba tu comprensión (Lectura 2)" items={[{type: "single", q: "Según el texto, la función principal de la política es…", options: ["garantizar la riqueza individual", "organizar la convivencia y buscar el bien común", "aumentar el poder del gobernante"], correct: [1], feedback: "Política = organización de la convivencia orientada al bien común."},{type: "single", q: "La 'felicidad compartida' a la que alude Aristóteles se relaciona con…", options: ["la justicia", "la competencia", "la fama"], correct: [0], feedback: "Para Aristóteles, la política bien orientada pretende una felicidad social: justicia."},{type: "single", q: "¿Qué artículos de la Constitución de 1978 conectan con estas ideas? (elige la opción más adecuada)", options: ["Art. 1 (soberanía nacional, Estado social y democrático) y Art. 10 (dignidad y derechos)", "Art. 27 (educación) y Art. 45 (medio ambiente)", "Art. 46 (patrimonio cultural) y Art. 148 (competencias autonómicas)"], correct: [0], feedback: "Art. 1 y 10 sirven como marco de justicia y dignidad para la convivencia."}]}/>
              <div className="bg-white rounded-2xl border border-slate-200 p-4">
                <h3 className="font-semibold mb-1 text-slate-800">Diario de aprendizaje</h3>
                <p className="text-sm text-slate-600 mb-2">Responde: ¿qué ejemplo cercano muestra la necesidad de leyes justas para la convivencia? ¿Cómo te ayuda el diálogo a resolver conflictos?</p>
                <TextSaver placeholder="Escribe aquí tu reflexión…" />
              </div>
            </section>
          );
        }

        function Quiz({ title, items }) {
          return (
            <section className="bg-white rounded-2xl border border-slate-200 p-4 md:p-6">
              <h3 className="font-semibold mb-3 text-slate-800">{title}</h3>
              <div className="grid gap-4">
                {items.map((it, idx) => (<QuizItem key={idx} {...it} index={idx + 1} />))}
              </div>
            </section>
          );
        }

        function QuizItem({ index, q, options, correct, feedback }) {
          const isMulti = (correct?.length || 0) > 1;
          const [selection, setSelection] = useState(isMulti ? [] : null);
          const [checked, setChecked] = useState(false);

          const toggle = (i) => {
            if (checked) return; // No permitir cambios después de comprobar
            if (!isMulti) {
              setSelection(i);
              return;
            }
            setSelection((prev) => (prev.includes(i) ? prev.filter((x) => x !== i) : [...prev, i]));
          };

          const isCorrect = () => {
            if (!checked) return null;
            if (isMulti) {
              return selection.sort().join(",") === correct.sort().join(",");
            }
            return selection === correct[0];
          };

          const status = isCorrect();

          return (
            <div className="border border-slate-200 rounded-xl p-3">
              <p className="font-medium mb-2 text-slate-700">{index}. {q}</p>
              <div className="grid gap-2">
                {options.map((opt, i) => {
                  const isSelected = isMulti ? selection.includes(i) : selection === i;
                  const isCorrectAnswer = correct.includes(i);
                  let borderColor = "border-slate-200";
                  if (checked) {
                    if (isCorrectAnswer) borderColor = "border-green-400";
                    else if (isSelected) borderColor = "border-red-400";
                  }
                  return (
                    <label key={i} className={`flex items-center gap-3 p-2 rounded-lg border-2 transition-colors ${borderColor} ${!checked ? 'cursor-pointer hover:bg-slate-50' : 'cursor-default'}`}>
                      <input type={isMulti ? "checkbox" : "radio"} name={`q${index}`} checked={isSelected} onChange={() => toggle(i)} disabled={checked} className="form-radio h-4 w-4 text-slate-600"/>
                      <span className="text-slate-700">{opt}</span>
                    </label>
                  );
                })}
              </div>
              <div className="flex items-center gap-3 mt-3">
                <button onClick={() => setChecked(true)} disabled={checked} className="px-3 py-1.5 rounded-lg bg-slate-800 text-white text-sm font-medium hover:bg-slate-900 disabled:bg-slate-400">Comprobar</button>
                {checked && (<span className={`text-sm font-semibold ${status ? "text-green-600" : "text-red-600"}`}>{status ? "¡Correcto!" : "Revisa tu respuesta."}</span>)}
              </div>
              {checked && feedback && (<p className="mt-2 text-sm text-slate-600 p-2 bg-slate-50 rounded-lg">{feedback}</p>)}
            </div>
          );
        }

        function TextSaver({ placeholder }) {
          const [txt, setTxt] = useState("");
          const copy = () => {
            const textArea = document.createElement("textarea");
            textArea.value = txt;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert("Texto copiado");
            } catch (err) {
                alert("No se pudo copiar.");
            }
            document.body.removeChild(textArea);
          };
          return (
            <div className="grid gap-2">
              <textarea value={txt} onChange={(e) => setTxt(e.target.value)} className="w-full min-h-[120px] border border-slate-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-slate-400 transition-shadow" placeholder={placeholder} />
              <div>
                <button onClick={copy} disabled={!txt} className="px-3 py-1.5 rounded-lg bg-slate-800 text-white text-sm font-medium hover:bg-slate-900 disabled:bg-slate-400">Copiar</button>
              </div>
            </div>
          );
        }

        // ============================
        // Pestaña 3 — CONSTRUCTOR TOULMIN
        // ============================
        function ToulminBuilder() {
          const [claim, setClaim] = useState("");
          const [reason, setReason] = useState("");
          const [evidence, setEvidence] = useState("");
          const [backing, setBacking] = useState("");
          const [article, setArticle] = useState("Art. 1 — Estado social y democrático; soberanía nacional");

          const copy = () => {
            const out = `AFIRMACIÓN: ${claim}\nRAZÓN: ${reason}\nPRUEBA/EVIDENCIA: ${evidence}\nRESPALDO (norma/autor): ${backing}\nVÍNCULO CON CONSTITUCIÓN: ${article}`;
            const textArea = document.createElement("textarea");
            textArea.value = out;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert("Argumento copiado al portapapeles");
            } catch (err) {
                alert("No se pudo copiar.");
            }
            document.body.removeChild(textArea);
          };

          return (
            <section className="grid gap-4">
              <h2 className="text-xl font-semibold text-slate-800">Constructor de argumentos (Toulmin)</h2>
              <p className="text-slate-600 -mt-2">Completa los campos y copia tu argumento para usarlo en el debate.</p>
              <div className="grid md:grid-cols-2 gap-4">
                <Field label="Afirmación (conclusión)"><textarea value={claim} onChange={(e) => setClaim(e.target.value)} className="w-full min-h-[80px] border border-slate-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="Ej.: Debemos establecer normas claras para repartir recursos" /></Field>
                <Field label="Razón (por qué)"><textarea value={reason} onChange={(e) => setReason(e.target.value)} className="w-full min-h-[80px] border border-slate-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="Ej.: La transparencia previene abusos y conflictos" /></Field>
                <Field label="Prueba/Evidencia (ejemplo, dato, caso)"><textarea value={evidence} onChange={(e) => setEvidence(e.target.value)} className="w-full min-h-[80px] border border-slate-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="Ej.: Inventario público y turnos reducen discusiones" /></Field>
                <Field label="Respaldo (autor, norma, principio)"><textarea value={backing} onChange={(e) => setBacking(e.target.value)} className="w-full min-h-[80px] border border-slate-300 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-slate-400" placeholder="Ej.: Aristóteles: felicidad compartida = justicia; DUDH; etc." /></Field>
              </div>
              <div className="grid gap-2">
                <label className="text-sm font-medium text-slate-700">Vínculo con la Constitución de 1978</label>
                <select value={article} onChange={(e) => setArticle(e.target.value)} className="w-full border border-slate-300 rounded-xl p-2 bg-white focus:outline-none focus:ring-2 focus:ring-slate-400">
                  <option>Art. 1 — Estado social y democrático; soberanía nacional</option>
                  <option>Art. 10 — Dignidad de la persona y derechos inviolables</option>
                  <option>Art. 14 — Igualdad ante la ley</option>
                  <option>Art. 20 — Libertad de expresión (límites)</option>
                </select>
              </div>
              <div>
                <button onClick={copy} className="px-4 py-2 rounded-xl bg-slate-800 text-white font-medium hover:bg-slate-900 text-sm">Copiar argumento</button>
              </div>
              <aside className="bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm text-slate-600">
                <p className="font-medium mb-1 text-slate-700">Sugerencia didáctica</p>
                <p>Convierte tu argumento en una tarjeta para el mini-debate. Roles: moderador/a, defensa, crítica, cronómetro y relator/a.</p>
              </aside>
            </section>
          );
        }

        function Field({ label, children }) {
          return (
            <label className="grid gap-1">
              <span className="text-sm font-medium text-slate-700">{label}</span>
              {children}
            </label>
          );
        }

        // Esta es la línea clave que conecta tu componente de React con el HTML
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>
